One of the useful debug features in the Cortex-M3 and Cortex-M4 processors is the Instrumentation Trace Macrocell (ITM). The ITM contains 32 stimulus port registers, and a write to these register can produce trace packets that output through the single pin Serial Wire Viewer (SWV) interface or the multi-bit Trace Port interface. The ITM feature allows you to export printf messages via SWV by re-targeting printf to the ITM. Please note that if the debug adaptor does not support trace, you cannot use the ITM to export printf messages.

In some development suites, printf messages can be transferred using the debug connection (Serial Wire/JTAG) instead of using trace (by ITM). This method is typically called semi-hosting. In some cases (e.g., ARM DS-5, IAR Embedded Workbench for ARM) it can perform additional functions like file I/O (e.g., a program running on the microcontroller may be able to open a file using “fopen” to access a file on the debug host). However, this does not replace some of the other functionalities of Cortex-M3/M4 trace like data trace, exception trace, and profiling. Semi-hosting requires the addition of an extra run-time code library to the executable image.

Using semi-hosting for printf is usually much slower than using SWV or UART because in most tools the semi-hosting mechanism needs to halt the processor. This could result in unexpected side effects for some peripheral control operations (e.g., interrupt latency increases),  but it has the advantage that it can cope with clock frequency changes in most implementations.
